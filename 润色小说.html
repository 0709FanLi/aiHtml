<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovelCraft AI - Enhance Your Writing</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Global Styles */
        :root {
            --primary-color: #6a3093;
            --secondary-color: #a044ff;
            --accent-color: #e91e63;
            --background-color: #1a1a2e;
            --text-color: #f0f0f0;
            --card-bg: #242444;
            --added-color: #4caf50;
            --deleted-color: #f44336;
            --modified-color: #ff9800;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100"><circle cx="50" cy="50" r="1" fill="rgba(255, 255, 255, 0.05)"/></svg>');
            background-size: 50px 50px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, var(--accent-color), #ff4081);
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            z-index: -1;
            filter: blur(20px);
            opacity: 0.2;
            border-radius: 12px;
        }

        /* Header Styles */
        header {
            background-color: rgba(26, 26, 46, 0.95);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: 700;
            color: var(--text-color);
            text-decoration: none;
        }

        .logo i {
            margin-right: 10px;
            color: var(--accent-color);
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 30px;
        }

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--accent-color);
        }

        .user-actions {
            display: flex;
            align-items: center;
        }

        .user-actions .btn {
            margin-left: 10px;
        }

        .user-profile {
            display: none; /* Initially hidden, shown after login */
            align-items: center;
            margin-left: 15px;
        }

        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .usage-count {
            background-color: var(--card-bg);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            margin-left: 10px;
        }

        /* Hero Section */
        .hero {
            padding: 60px 0;
            text-align: center;
            position: relative;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100"><path d="M30,30L70,70M30,70L70,30" stroke="rgba(255, 255, 255, 0.03)" stroke-width="1"/></svg>');
            background-size: 30px 30px;
            pointer-events: none;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: gradient-shift 10s ease infinite;
        }

        @keyframes gradient-shift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .hero p {
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto 30px;
            color: rgba(240, 240, 240, 0.8);
        }

        /* Input Section */
        .input-section {
            padding: 40px 0;
        }

        .text-input-container {
            position: relative;
            margin-bottom: 20px;
        }

        .text-input {
            width: 100%;
            height: 250px;
            padding: 15px;
            background-color: var(--card-bg);
            border: 2px solid rgba(106, 48, 147, 0.3);
            border-radius: 8px;
            resize: vertical;
            color: var(--text-color);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .text-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 8px rgba(106, 48, 147, 0.5);
        }

        .file-upload {
            display: flex;
            margin-bottom: 20px;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-upload label {
            display: flex;
            align-items: center;
            background: var(--card-bg);
            color: var(--text-color);
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(106, 48, 147, 0.3);
        }

        .file-upload label:hover {
            background: rgba(106, 48, 147, 0.2);
        }

        .file-upload i {
            margin-right: 10px;
        }

        .file-name {
            margin-left: 10px;
            font-style: italic;
            color: rgba(240, 240, 240, 0.7);
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 150px;
            height: 150px;
            background: var(--card-bg);
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .action-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            border-color: var(--secondary-color);
        }

        .action-btn.polish {
            border-color: rgba(106, 48, 147, 0.3);
        }

        .action-btn.expand {
            border-color: rgba(76, 175, 80, 0.3);
        }

        .action-btn.condense {
            border-color: rgba(255, 152, 0, 0.3);
        }

        .action-btn i {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .action-btn.polish i {
            color: var(--primary-color);
        }

        .action-btn.expand i {
            color: var(--added-color);
        }

        .action-btn.condense i {
            color: var(--modified-color);
        }

        .action-btn h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .action-btn p {
            font-size: 12px;
            text-align: center;
            color: rgba(240, 240, 240, 0.7);
        }

        /* Result Section */
        .result-section {
            padding: 40px 0;
            display: none; /* Initially hidden, shown after processing */
        }

        .comparison-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .text-column {
            flex: 1;
            min-width: 300px;
        }

        .text-column h3 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .text-column h3 i {
            margin-right: 10px;
        }

        .text-content {
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            line-height: 1.8;
            font-size: 15px;
        }

        .text-content::-webkit-scrollbar {
            width: 8px;
        }

        .text-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .text-content::-webkit-scrollbar-thumb {
            background: rgba(106, 48, 147, 0.5);
            border-radius: 10px;
        }

        .legend {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            margin-right: 8px;
        }

        .added {
            background-color: var(--added-color);
        }

        .deleted {
            background-color: var(--deleted-color);
        }

        .modified {
            background-color: var(--modified-color);
        }

        .result-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        /* Pricing Section */
        .pricing-section {
            padding: 60px 0;
            text-align: center;
        }

        .pricing-heading {
            margin-bottom: 50px;
        }

        .pricing-heading h2 {
            font-size: 36px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .pricing-heading p {
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto;
            color: rgba(240, 240, 240, 0.8);
        }

        .pricing-plans {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .pricing-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 30px;
            width: 300px;
            text-align: center;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .pricing-card:hover {
            transform: translateY(-10px);
            border-color: var(--secondary-color);
        }

        .pricing-card.popular {
            border-color: var(--accent-color);
        }

        .popular-tag {
            position: absolute;
            top: 15px;
            right: -30px;
            background: var(--accent-color);
            color: white;
            padding: 5px 30px;
            transform: rotate(45deg);
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .pricing-card h3 {
            font-size: 24px;
            margin-bottom: 15px;
        }

        .price {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }

        .price span {
            font-size: 16px;
            font-weight: normal;
            color: rgba(240, 240, 240, 0.7);
        }

        .credits {
            font-size: 18px;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .pricing-card .btn {
            width: 100%;
            padding: 12px;
        }

        /* Login/Register Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 400px;
            border-radius: 8px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            height: 10px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 8px 8px 0 0;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-header h2 {
            font-size: 22px;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            color: var(--accent-color);
        }

        .modal-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .modal-tab.active {
            color: var(--secondary-color);
            border-bottom: 3px solid var(--secondary-color);
        }

        .modal-content {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            color: var(--text-color);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(160, 68, 255, 0.2);
        }

        .forgot-password {
            text-align: right;
            margin-bottom: 20px;
        }

        .forgot-password a {
            color: var(--secondary-color);
            text-decoration: none;
            font-size: 14px;
        }

        .modal-content .btn {
            width: 100%;
            padding: 12px;
            margin-top: 10px;
        }

        .social-login {
            margin-top: 30px;
            text-align: center;
        }

        .social-login p {
            margin-bottom: 15px;
            color: rgba(240, 240, 240, 0.7);
            position: relative;
        }

        .social-login p::before,
        .social-login p::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 30%;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.1);
        }

        .social-login p::before {
            left: 0;
        }

        .social-login p::after {
            right: 0;
        }

        .social-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .social-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-color);
        }

        .social-btn:hover {
            transform: translateY(-3px);
        }

        .social-btn.google:hover {
            color: #ea4335;
        }

        .social-btn.facebook:hover {
            color: #1877f2;
        }

        .social-btn.twitter:hover {
            color: #1da1f2;
        }

        /* Purchase Confirmation Modal */
        .purchase-modal .modal-content {
            text-align: center;
        }

        .purchase-details {
            margin-bottom: 20px;
        }

        .purchase-details h3 {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--secondary-color);
        }

        .purchase-details p {
            font-size: 16px;
            margin-bottom: 8px;
        }

        .purchase-price {
            font-size: 36px;
            font-weight: 700;
            margin: 20px 0;
            color: var(--secondary-color);
        }

        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .payment-method {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-method:hover,
        .payment-method.selected {
            background-color: rgba(106, 48, 147, 0.1);
            border-color: var(--secondary-color);
        }

        .payment-method img {
            width: 40px;
            margin-right: 15px;
        }

        /* History Section */
        .history-section {
            padding: 40px 0;
            display: none; /* Initially hidden, shown after login */
        }

        .history-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .history-list {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
        }

        .history-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-item:hover {
            background-color: rgba(106, 48, 147, 0.1);
        }

        .history-content {
            display: flex;
            flex-direction: column;
        }

        .history-date {
            font-size: 12px;
            color: rgba(240, 240, 240, 0.6);
            margin-top: 5px;
        }

        .history-type {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .history-type.polish {
            background-color: rgba(106, 48, 147, 0.2);
            color: var(--primary-color);
        }

        .history-type.expand {
            background-color: rgba(76, 175, 80, 0.2);
            color: var(--added-color);
        }

        .history-type.condense {
            background-color: rgba(255, 152, 0, 0.2);
            color: var(--modified-color);
        }

        /* Footer */
        footer {
            background-color: rgba(26, 26, 46, 0.95);
            padding: 40px 0 20px;
            margin-top: 60px;
            position: relative;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }

        .footer-column {
            flex: 1;
            min-width: 200px;
        }

        .footer-column h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: rgba(240, 240, 240, 0.7);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--accent-color);
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-icon:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(240, 240, 240, 0.6);
            font-size: 14px;
        }

        /* Floating credit badge */
        .credits-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid var(--secondary-color);
            border-radius: 20px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
            z-index: 100;
            transition: all 0.3s ease;
            opacity: 0.7;
        }

        .credits-badge:hover {
            opacity: 1;
            transform: translateY(-3px);
        }

        .credits-badge i {
            color: var(--secondary-color);
            margin-right: 8px;
        }

        .credits-badge span {
            font-weight: 600;
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
        }

        .toast {
            background-color: var(--card-bg);
            color: var(--text-color);
            padding: 15px 20px;
            border-radius: 5px;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-width: 300px;
            animation: slideInRight 0.3s ease, fadeOut 0.5s ease 3.5s forwards;
            border-left: 4px solid var(--secondary-color);
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; visibility: hidden; }
        }

        .toast i {
            margin-right: 10px;
            font-size: 18px;
        }

        .toast.success {
            border-left-color: var(--added-color);
        }

        .toast.success i {
            color: var(--added-color);
        }

        .toast.error {
            border-left-color: var(--deleted-color);
        }

        .toast.error i {
            color: var(--deleted-color);
        }

        .toast.info {
            border-left-color: var(--secondary-color);
        }

        .toast.info i {
            color: var(--secondary-color);
        }

        .toast-close {
            background: none;
            border: none;
            color: rgba(240, 240, 240, 0.7);
            cursor: pointer;
            font-size: 16px;
            padding: 0 5px;
        }

        .toast-close:hover {
            color: var(--text-color);
        }

        /* Loading Indicator */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(26, 26, 46, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1500;
            backdrop-filter: blur(5px);
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 6px solid transparent;
            border-top-color: var(--primary-color);
            border-bottom-color: var(--secondary-color);
            animation: spin 1.5s linear infinite;
        }

        .loading-spinner::before, .loading-spinner::after {
            content: '';
            position: absolute;
            border-radius: 50%;
        }

        .loading-spinner::before {
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 6px solid transparent;
            border-left-color: var(--accent-color);
            border-right-color: var(--secondary-color);
            animation: spin 1s linear infinite reverse;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            position: absolute;
            top: calc(50% + 50px);
            font-size: 18px;
            font-weight: 600;
            color: var(--text-color);
            text-align: center;
        }

        /* Responsive Styles */
        @media (max-width: 900px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                color: var(--text-color);
                font-size: 24px;
                cursor: pointer;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .action-btn {
                width: 100%;
                max-width: 300px;
            }

            .comparison-container {
                flex-direction: column;
            }

            .pricing-card {
                width: 100%;
                max-width: 350px;
            }
        }

        @media (max-width: 600px) {
            .hero h1 {
                font-size: 36px;
            }

            .footer-content {
                flex-direction: column;
            }

            .modal {
                width: 90%;
            }

            .legend {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        /* Added Text Styles */
        .added-text {
            background-color: rgba(76, 175, 80, 0.2);
            color: var(--added-color);
            padding: 0 3px;
            border-radius: 3px;
            font-weight: 500;
        }

        /* Deleted Text Styles */
        .deleted-text {
            background-color: rgba(244, 67, 54, 0.2);
            color: var(--deleted-color);
            padding: 0 3px;
            border-radius: 3px;
            text-decoration: line-through;
            font-weight: 500;
            display: inline-block;
        }

        /* Modified Text Styles */
        .modified-text {
            background-color: rgba(255, 152, 0, 0.2);
            color: var(--modified-color);
            padding: 0 3px;
            border-radius: 3px;
            font-weight: 500;
        }

        /* Mobile Menu */
        .mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 80%;
            height: 100%;
            background-color: var(--background-color);
            z-index: 1500;
            transform: translateX(-100%);
            transition: transform 0.3s ease-out;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow-y: auto;
            padding: 20px;
        }

        .mobile-menu.active {
            transform: translateX(0);
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .mobile-menu-links {
            list-style: none;
        }

        .mobile-menu-links li {
            margin-bottom: 15px;
        }

        .mobile-menu-links a {
            color: var(--text-color);
            text-decoration: none;
            font-size: 18px;
            display: block;
            padding: 10px 0;
            transition: all 0.3s ease;
        }

        .mobile-menu-links a:hover {
            color: var(--accent-color);
        }

        .mobile-menu-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1400;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .mobile-menu-backdrop.active {
            display: block;
            opacity: 1;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 24px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <a href="#" class="logo"><i class="fas fa-quill-pointed"></i> NovelCraft AI</a>
                <ul class="nav-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                    <li><a href="#" id="historyLink">My History</a></li>
                </ul>
                <div class="user-actions">
                    <button class="btn" id="loginBtn">Login</button>
                    <button class="btn btn-secondary" id="signupBtn">Sign Up</button>
                    <div class="user-profile" id="userProfile">
                        <img src="https://via.placeholder.com/40" alt="User Avatar">
                        <div>
                            <span id="userName">John Doe</span>
                            <div class="usage-count">Credits: <span id="creditCount">30</span></div>
                        </div>
                    </div>
                </div>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu-backdrop"></div>
    <div class="mobile-menu">
        <div class="mobile-menu-header">
            <a href="#" class="logo"><i class="fas fa-quill-pointed"></i> NovelCraft AI</a>
            <button class="close-btn mobile-menu-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <ul class="mobile-menu-links">
            <li><a href="#">Home</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#pricing">Pricing</a></li>
            <li><a href="#" class="mobile-history-link">My History</a></li>
            <li><a href="#" class="mobile-login-btn">Login</a></li>
            <li><a href="#" class="mobile-signup-btn">Sign Up</a></li>
        </ul>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Elevate Your Novel with AI</h1>
            <p>Upload your manuscript and let our advanced AI enhance, expand, or condense your text with intelligent suggestions. Perfect for novelists, fantasy writers, and creative minds.</p>
            <button class="btn btn-secondary">Get Started</button>
        </div>
    </section>

    <!-- Input Section -->
    <section class="input-section" id="features">
        <div class="container">
            <div class="card">
                <div class="text-input-container">
                    <textarea class="text-input" id="novelText" placeholder="Paste your novel text here or upload a file..."></textarea>
                </div>
                <div class="file-upload">
                    <input type="file" id="fileInput" accept=".txt, .docx, .pdf">
                    <label for="fileInput"><i class="fas fa-file-upload"></i> Upload File</label>
                    <span class="file-name" id="fileName"></span>
                </div>
                <div class="action-buttons">
                    <div class="action-btn polish" id="polishBtn">
                        <i class="fas fa-magic"></i>
                        <h3>Polish</h3>
                        <p>Enhance writing style and fix grammatical errors</p>
                    </div>
                    <div class="action-btn expand" id="expandBtn">
                        <i class="fas fa-expand-alt"></i>
                        <h3>Expand</h3>
                        <p>Add details and develop scenes further</p>
                    </div>
                    <div class="action-btn condense" id="condenseBtn">
                        <i class="fas fa-compress-alt"></i>
                        <h3>Condense</h3>
                        <p>Trim unnecessary content for better pacing</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Result Section -->
    <section class="result-section" id="resultSection">
        <div class="container">
            <div class="card">
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color added"></div>
                        <span>Added Text</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color deleted"></div>
                        <span>Deleted Text</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color modified"></div>
                        <span>Modified Text</span>
                    </div>
                </div>
                <div class="comparison-container">
                    <div class="text-column">
                        <h3><i class="fas fa-file-alt"></i> Original Text</h3>
                        <div class="text-content" id="originalText"></div>
                    </div>
                    <div class="text-column">
                        <h3><i class="fas fa-file-medical-alt"></i> Enhanced Text</h3>
                        <div class="text-content" id="enhancedText"></div>
                    </div>
                </div>
                <div class="result-actions">
                    <button class="btn" id="copyBtn"><i class="fas fa-copy"></i> Copy to Clipboard</button>
                    <button class="btn" id="downloadBtn"><i class="fas fa-download"></i> Download Result</button>
                    <button class="btn btn-secondary" id="newEditBtn"><i class="fas fa-edit"></i> New Edit</button>
                </div>
            </div>
        </div>
    </section>

    <!-- History Section -->
    <section class="history-section" id="historySection">
        <div class="container">
            <div class="history-title">
                <h2>Your Editing History</h2>
                <button class="btn" id="clearHistoryBtn">Clear History</button>
            </div>
            <div class="history-list" id="historyList">
                <!-- History items will be injected here -->
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section class="pricing-section" id="pricing">
        <div class="container">
            <div class="pricing-heading">
                <h2>Affordable Plans for Every Writer</h2>
                <p>Choose the perfect plan for your writing needs. From casual editing to professional novel development, we've got you covered.</p>
            </div>
            <div class="pricing-plans">
                <div class="pricing-card">
                    <h3>Starter</h3>
                    <div class="price">$0.99 <span>one-time</span></div>
                    <div class="credits">2 Credits</div>
                    <button class="btn purchase-btn" data-plan="starter" data-price="0.99" data-credits="2">Purchase Now</button>
                </div>
                <div class="pricing-card">
                    <h3>Basic</h3>
                    <div class="price">$4.99 <span>one-time</span></div>
                    <div class="credits">10 Credits</div>
                    <button class="btn purchase-btn" data-plan="basic" data-price="4.99" data-credits="10">Purchase Now</button>
                </div>
                <div class="pricing-card popular">
                    <div class="popular-tag">POPULAR</div>
                    <h3>Standard</h3>
                    <div class="price">$9.99 <span>one-time</span></div>
                    <div class="credits">30 Credits</div>
                    <button class="btn purchase-btn" data-plan="standard" data-price="9.99" data-credits="30">Purchase Now</button>
                </div>
                <div class="pricing-card">
                    <h3>Monthly</h3>
                    <div class="price">$10.99 <span>/month</span></div>
                    <div class="credits">50 Credits/month</div>
                    <button class="btn purchase-btn" data-plan="monthly" data-price="10.99" data-credits="50">Subscribe Now</button>
                </div>
                <div class="pricing-card">
                    <h3>Annual</h3>
                    <div class="price">$99.90 <span>/year</span></div>
                    <div class="credits">1000 Credits/year</div>
                    <button class="btn purchase-btn" data-plan="annual" data-price="99.90" data-credits="1000">Subscribe Now</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>About NovelCraft AI</h3>
                    <ul class="footer-links">
                        <li><a href="#">Our Story</a></li>
                        <li><a href="#">Team</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Press</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Features</h3>
                    <ul class="footer-links">
                        <li><a href="#">Text Polishing</a></li>
                        <li><a href="#">Content Expansion</a></li>
                        <li><a href="#">Text Condensing</a></li>
                        <li><a href="#">Fantasy Focus</a></li>
                        <li><a href="#">Writing Tips</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul class="footer-links">
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">System Status</a></li>
                        <li><a href="#">Report a Bug</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Stay Connected</h3>
                    <p>Join our newsletter for writing tips and updates.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 NovelCraft AI. All rights reserved. <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
            </div>
        </div>
    </footer>

    <!-- Login/Register Modal -->
    <div class="modal-overlay" id="authModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Welcome to NovelCraft AI</h2>
                <button class="close-btn" id="closeAuthModal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-tabs">
                <div class="modal-tab active" id="loginTab">Login</div>
                <div class="modal-tab" id="registerTab">Register</div>
            </div>
            <div class="modal-content" id="loginContent">
                <div class="form-group">
                    <label for="loginEmail">Email Address</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                </div>
                <div class="forgot-password">
                    <a href="#">Forgot Password?</a>
                </div>
                <button class="btn" id="loginSubmitBtn">Login</button>
                <div class="social-login">
                    <p>Or login with</p>
                    <div class="social-buttons">
                        <div class="social-btn google"><i class="fab fa-google"></i></div>
                        <div class="social-btn facebook"><i class="fab fa-facebook-f"></i></div>
                        <div class="social-btn twitter"><i class="fab fa-twitter"></i></div>
                    </div>
                </div>
            </div>
            <div class="modal-content" id="registerContent" style="display: none;">
                <div class="form-group">
                    <label for="registerName">Full Name</label>
                    <input type="text" id="registerName" placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email Address</label>
                    <input type="email" id="registerEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirm Password</label>
                    <input type="password" id="registerConfirmPassword" placeholder="Confirm your password">
                </div>
                <button class="btn" id="registerSubmitBtn">Create Account</button>
                <div class="social-login">
                    <p>Or register with</p>
                    <div class="social-buttons">
                        <div class="social-btn google"><i class="fab fa-google"></i></div>
                        <div class="social-btn facebook"><i class="fab fa-facebook-f"></i></div>
                        <div class="social-btn twitter"><i class="fab fa-twitter"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div class="modal-overlay" id="purchaseModal">
        <div class="modal purchase-modal">
            <div class="modal-header">
                <h2>Purchase Credits</h2>
                <button class="close-btn" id="closePurchaseModal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-content">
                <div class="purchase-details">
                    <h3 id="planName">Standard Plan</h3>
                    <p id="planDescription">One-time purchase of 30 credits</p>
                </div>
                <div class="purchase-price" id="planPrice">$9.99</div>
                <div class="payment-methods">
                    <div class="payment-method selected">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/200px-Mastercard-logo.svg.png" alt="Mastercard">
                        <span>Credit / Debit Card</span>
                    </div>
                    <div class="payment-method">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/PayPal.svg/124px-PayPal.svg.png" alt="PayPal">
                        <span>PayPal</span>
                    </div>
                    <div class="payment-method">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Apple_logo_black.svg/50px-Apple_logo_black.svg.png" alt="Apple Pay">
                        <span>Apple Pay</span>
                    </div>
                </div>
                <button class="btn" id="confirmPurchaseBtn">Confirm Purchase</button>
            </div>
        </div>
    </div>

    <!-- Credits Badge -->
    <div class="credits-badge" id="creditsBadge" style="display: none;">
        <i class="fas fa-gem"></i> Credits: <span id="badgeCredits">30</span>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toastContainer">
        <!-- Toasts will be injected here -->
    </div>

    <!-- Loading Indicator -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Enhancing your text...</div>
    </div>

    <script>
        // Sample Data for Demo
        const sampleHistoryData = [
            {
                id: 1,
                title: "The Forgotten Kingdom - Chapter 3",
                type: "polish",
                date: "2023-05-15 14:32",
                originalText: "The castle was old and scary. It had many towers that reached up to the sky. The princess lived there for many years, waiting for someone to save her.",
                enhancedText: "The ancient castle loomed <span class='added-text'>ominously</span> against the <span class='added-text'>twilight</span> sky, its <span class='deleted-text'>many</span> <span class='modified-text'>weathered</span> towers reaching <span class='modified-text'>toward</span> the heavens. The princess had <span class='modified-text'>resided</span> there for many years, <span class='deleted-text'>waiting for someone to save her</span> <span class='added-text'>her heart growing colder with each passing season as she awaited her salvation</span>."
            },
            {
                id: 2,
                title: "Dragon's Curse - Opening Scene",
                type: "expand",
                date: "2023-05-10 09:17",
                originalText: "The dragon breathed fire. The village burned.",
                enhancedText: "The <span class='modified-text'>massive</span> dragon <span class='added-text'>unfurled its leathery wings and</span> breathed <span class='modified-text'>a torrent of searing</span> fire <span class='added-text'>from its ancient, cavernous maw</span>. The village <span class='deleted-text'>burned</span> <span class='added-text'>erupted in flames, thatched roofs igniting like kindling as terrified screams echoed through the valley. Mothers clutched children to their breasts as they fled, while the men futilely raised pitchforks against the unstoppable inferno raining from above</span>."
            },
            {
                id: 3,
                title: "The Wizard's Apprentice - Draft",
                type: "condense",
                date: "2023-05-05 16:45",
                originalText: "The young boy named Tim was very excited about his first day as a wizard's apprentice. He had always dreamed of learning magic ever since he was a very small child. His parents were farmers who worked in the fields everyday, but Tim knew he wanted a different life. When the wizard Aldobrand came to their small village looking for an apprentice, Tim volunteered immediately. The wizard was very old and had a long white beard that went down to his knees. He wore blue robes with stars and moons on them.",
                enhancedText: "<span class='deleted-text'>The young boy named</span> Tim <span class='modified-text'>eagerly anticipated</span> his first day as <span class='deleted-text'>a</span> <span class='modified-text'>the</span> wizard's apprentice<span class='deleted-text'>. He had always dreamed of learning magic ever since he was a very small child</span>. <span class='deleted-text'>His parents were farmers who worked in the fields everyday, but Tim knew he wanted a different life.</span> <span class='modified-text'>When</span> <span class='deleted-text'>the wizard</span> Aldobrand <span class='deleted-text'>came to their small village looking for an apprentice, Tim volunteered immediately. The wizard was very old and</span> <span class='modified-text'>- ancient, with</span> a <span class='modified-text'>knee-length</span> <span class='deleted-text'>long</span> white beard <span class='deleted-text'>that went down to his knees</span> <span class='modified-text'>and</span> <span class='deleted-text'>. He wore</span> blue robes <span class='modified-text'>embroidered with</span> <span class='deleted-text'>with</span> stars and moons <span class='deleted-text'>on them</span>."
            }
        ];

        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const authModal = document.getElementById('authModal');
        const closeAuthModal = document.getElementById('closeAuthModal');
        const loginTab = document.getElementById('loginTab');
        const registerTab = document.getElementById('registerTab');
        const loginContent = document.getElementById('loginContent');
        const registerContent = document.getElementById('registerContent');
        const loginSubmitBtn = document.getElementById('loginSubmitBtn');
        const registerSubmitBtn = document.getElementById('registerSubmitBtn');
        const userProfile = document.getElementById('userProfile');
        const creditCount = document.getElementById('creditCount');
        const badgeCredits = document.getElementById('badgeCredits');
        const creditsBadge = document.getElementById('creditsBadge');
        const historyLink = document.getElementById('historyLink');
        const historySection = document.getElementById('historySection');
        const historyList = document.getElementById('historyList');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        const fileInput = document.getElementById('fileInput');
        const fileName = document.getElementById('fileName');
        const novelText = document.getElementById('novelText');
        const polishBtn = document.getElementById('polishBtn');
        const expandBtn = document.getElementById('expandBtn');
        const condenseBtn = document.getElementById('condenseBtn');
        const resultSection = document.getElementById('resultSection');
        const originalText = document.getElementById('originalText');
        const enhancedText = document.getElementById('enhancedText');
        const copyBtn = document.getElementById('copyBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const newEditBtn = document.getElementById('newEditBtn');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const toastContainer = document.getElementById('toastContainer');
        const purchaseModal = document.getElementById('purchaseModal');
        const closePurchaseModal = document.getElementById('closePurchaseModal');
        const purchaseButtons = document.querySelectorAll('.purchase-btn');
        const planName = document.getElementById('planName');
        const planDescription = document.getElementById('planDescription');
        const planPrice = document.getElementById('planPrice');
        const confirmPurchaseBtn = document.getElementById('confirmPurchaseBtn');
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const mobileMenu = document.querySelector('.mobile-menu');
        const mobileMenuBackdrop = document.querySelector('.mobile-menu-backdrop');
        const mobileMenuClose = document.querySelector('.mobile-menu-close');
        const mobileLoginBtn = document.querySelector('.mobile-login-btn');
        const mobileSignupBtn = document.querySelector('.mobile-signup-btn');
        const mobileHistoryLink = document.querySelector('.mobile-history-link');

        // State Variables
        let isLoggedIn = false;
        let usageCredits = 0;
        let userHistory = [...sampleHistoryData];
        let freeUsageUsed = false;

        // Function to show toast notifications
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            let icon = 'info-circle';
            if (type === 'success') icon = 'check-circle';
            if (type === 'error') icon = 'exclamation-circle';
            
            toast.innerHTML = `
                <div>
                    <i class="fas fa-${icon}"></i>
                    <span>${message}</span>
                </div>
                <button class="toast-close">&times;</button>
            `;
            
            toastContainer.appendChild(toast);
            
            // Auto remove after 4 seconds
            setTimeout(() => {
                toast.remove();
            }, 4000);
            
            // Remove on click
            toast.querySelector('.toast-close').addEventListener('click', () => {
                toast.remove();
            });
        }

        // Toggle between login and register tabs
        loginTab.addEventListener('click', () => {
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            loginContent.style.display = 'block';
            registerContent.style.display = 'none';
        });

        registerTab.addEventListener('click', () => {
            registerTab.classList.add('active');
            loginTab.classList.remove('active');
            registerContent.style.display = 'block';
            loginContent.style.display = 'none';
        });

        // Show/Hide Modal functions
        function showAuthModal() {
            authModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function hideAuthModal() {
            authModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function showPurchaseModal(plan, price, credits, subscription = false) {
            planName.textContent = plan + ' Plan';
            planPrice.textContent = '$' + price;
            
            if (subscription) {
                planDescription.textContent = `${subscription} subscription with ${credits} credits`;
            } else {
                planDescription.textContent = `One-time purchase of ${credits} credits`;
            }
            
            purchaseModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function hidePurchaseModal() {
            purchaseModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Login/Signup Event Listeners
        loginBtn.addEventListener('click', showAuthModal);
        signupBtn.addEventListener('click', () => {
            showAuthModal();
            registerTab.click();
        });
        closeAuthModal.addEventListener('click', hideAuthModal);

        closePurchaseModal.addEventListener('click', hidePurchaseModal);

        // Login Form Submission
        loginSubmitBtn.addEventListener('click', () => {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            // Simulate login
            loadingOverlay.style.display = 'flex';
            
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
                isLoggedIn = true;
                usageCredits = 30; // Starting credits
                updateUIAfterLogin();
                hideAuthModal();
                showToast('Successfully logged in!', 'success');
            }, 1500);
        });

        // Register Form Submission
        registerSubmitBtn.addEventListener('click', () => {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (!name || !email || !password || !confirmPassword) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            // Simulate registration
            loadingOverlay.style.display = 'flex';
            
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
                isLoggedIn = true;
                usageCredits = 5; // Welcome credits for new users
                document.getElementById('userName').textContent = name;
                updateUIAfterLogin();
                hideAuthModal();
                showToast('Account created successfully!', 'success');
            }, 1500);
        });

        // Update UI after login
        function updateUIAfterLogin() {
            loginBtn.style.display = 'none';
            signupBtn.style.display = 'none';
            userProfile.style.display = 'flex';
            creditCount.textContent = usageCredits;
            badgeCredits.textContent = usageCredits;
            creditsBadge.style.display = 'flex';
            
            // Generate history items
            renderHistoryItems();
        }

        // History related functions
        historyLink.addEventListener('click', (e) => {
            e.preventDefault();
            
            if (!isLoggedIn) {
                showToast('Please login to view your history', 'info');
                showAuthModal();
                return;
            }
            
            toggleHistorySection();
        });

        mobileHistoryLink.addEventListener('click', (e) => {
            e.preventDefault();
            
            if (!isLoggedIn) {
                showToast('Please login to view your history', 'info');
                showAuthModal();
                return;
            }
            
            toggleHistorySection();
            closeMobileMenu();
        });

        function toggleHistorySection() {
            if (historySection.style.display === 'block') {
                historySection.style.display = 'none';
                resultSection.style.display = 'none';
            } else {
                historySection.style.display = 'block';
                resultSection.style.display = 'none';
            }
        }

        function renderHistoryItems() {
            historyList.innerHTML = '';
            
            if (userHistory.length === 0) {
                historyList.innerHTML = `
                    <div class="history-item">
                        <p>No history items yet. Start enhancing your texts!</p>
                    </div>
                `;
                return;
            }
            
            userHistory.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.dataset.id = item.id;
                
                historyItem.innerHTML = `
                    <div class="history-content">
                        <h4>${item.title} <span class="history-type ${item.type}">${item.type.charAt(0).toUpperCase() + item.type.slice(1)}</span></h4>
                        <div class="history-date">${item.date}</div>
                    </div>
                    <div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                `;
                
                historyItem.addEventListener('click', () => {
                    loadHistoryItem(item);
                });
                
                historyList.appendChild(historyItem);
            });
        }

        function loadHistoryItem(item) {
            originalText.innerHTML = item.originalText;
            enhancedText.innerHTML = item.enhancedText;
            
            historySection.style.display = 'none';
            resultSection.style.display = 'block';
            
            // Scroll to result section
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }

        clearHistoryBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to clear your history? This cannot be undone.')) {
                userHistory = [];
                renderHistoryItems();
                showToast('History cleared successfully', 'success');
            }
        });

        // File upload handling
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                fileName.textContent = file.name;
                
                // Simulate file reading
                setTimeout(() => {
                    // For demo, just create some fake text based on the file name
                    const fakeText = `This is a sample text extracted from ${file.name}. In the distant kingdom of Eldoria, magic flowed through the land like rivers of liquid starlight. Wizards walked among commoners, their robes shimmering with power, their staffs adorned with crystals that pulsed in rhythm with their heartbeats. The young apprentice Thorne stared in awe at the Grand Academy of Arcane Arts, its towers spiraling impossibly high, defying both gravity and logic. Today was his first day, and his hands trembled with equal parts excitement and terror.`;
                    
                    novelText.value = fakeText;
                    showToast('File content loaded successfully', 'success');
                }, 1000);
            }
        });

        // Text processing functions
        function processText(type) {
            const text = novelText.value.trim();
            
            if (!text) {
                showToast('Please enter or upload some text first', 'error');
                return;
            }
            
            // Check if user has credits
            if (!isLoggedIn && freeUsageUsed) {
                showToast('You have used your free usage. Please login or sign up to continue.', 'info');
                showAuthModal();
                return;
            }
            
            if (isLoggedIn && usageCredits <= 0) {
                showToast('You have no credits left. Please purchase more to continue.', 'info');
                purchaseButtons[2].click(); // Show modal for standard plan
                return;
            }
            
            // Show loading overlay
            loadingOverlay.style.display = 'flex';
            document.getElementsByClassName('loading-text')[0].textContent = `${type.charAt(0).toUpperCase() + type.slice(1)}ing your text...`;
            
            // Simulate processing delay
            setTimeout(() => {
                // Generate enhanced text based on the type
                let processedText = '';
                
                if (type === 'polish') {
                    processedText = polishText(text);
                } else if (type === 'expand') {
                    processedText = expandText(text);
                } else if (type === 'condense') {
                    processedText = condenseText(text);
                }
                
                // Display results
                originalText.textContent = text;
                enhancedText.innerHTML = processedText;
                
                // Show result section
                resultSection.style.display = 'block';
                resultSection.scrollIntoView({ behavior: 'smooth' });
                
                // Hide loading overlay
                loadingOverlay.style.display = 'none';
                
                // Update credits if logged in
                if (isLoggedIn) {
                    usageCredits--;
                    creditCount.textContent = usageCredits;
                    badgeCredits.textContent = usageCredits;
                    
                    // Add to history
                    const newHistoryItem = {
                        id: Date.now(),
                        title: `Document ${userHistory.length + 1}`,
                        type: type,
                        date: new Date().toLocaleString('en-US', { 
                            year: 'numeric', 
                            month: '2-digit', 
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit'
                        }),
                        originalText: text,
                        enhancedText: processedText
                    };
                    
                    userHistory.unshift(newHistoryItem);
                    renderHistoryItems();
                } else {
                    freeUsageUsed = true;
                }
                
                showToast(`Text successfully ${type}ed!`, 'success');
            }, 3000);
        }

        // Text processing algorithms (simulated)
        function polishText(text) {
            // Simulated polishing algorithm
            const sentences = text.match(/[^\.!\?]+[\.!\?]+/g) || [text];
            let polishedHTML = '';
            
            sentences.forEach(sentence => {
                const rand = Math.random();
                
                if (rand < 0.3) {
                    // Replace some words
                    sentence = sentence
                        .replace(/old/g, '<span class="deleted-text">old</span> <span class="modified-text">ancient</span>')
                        .replace(/scary/g, '<span class="deleted-text">scary</span> <span class="modified-text">terrifying</span>')
                        .replace(/big/g, '<span class="deleted-text">big</span> <span class="modified-text">massive</span>')
                        .replace(/small/g, '<span class="deleted-text">small</span> <span class="modified-text">tiny</span>')
                        .replace(/walked/g, '<span class="deleted-text">walked</span> <span class="modified-text">strode</span>')
                        .replace(/ran/g, '<span class="deleted-text">ran</span> <span class="modified-text">dashed</span>')
                        .replace(/said/g, '<span class="deleted-text">said</span> <span class="modified-text">declared</span>');
                } else if (rand < 0.6) {
                    // Add adjectives or adverbs
                    sentence = sentence
                        .replace(/the castle/gi, 'the <span class="added-text">ancient</span> castle')
                        .replace(/the wizard/gi, 'the <span class="added-text">mysterious</span> wizard')
                        .replace(/the dragon/gi, 'the <span class="added-text">fearsome</span> dragon')
                        .replace(/walked/g, 'walked <span class="added-text">cautiously</span>')
                        .replace(/said/g, 'said <span class="added-text">confidently</span>');
                }
                
                polishedHTML += sentence + ' ';
            });
            
            return polishedHTML.trim();
        }

        function expandText(text) {
            // Simulated expansion algorithm
            const sentences = text.match(/[^\.!\?]+[\.!\?]+/g) || [text];
            let expandedHTML = '';
            
            sentences.forEach(sentence => {
                const rand = Math.random();
                
                if (rand < 0.4) {
                    // Add descriptive phrases
                    expandedHTML += sentence.trim() + ' <span class="added-text">The air was thick with anticipation, a palpable tension that seemed to make the very stones of the castle walls sweat with anxiety.</span> ';
                } else if (rand < 0.7) {
                    // Add character thoughts or background
                    expandedHTML += sentence.trim() + ' <span class="added-text">Memories of the ancient prophecies flooded through her mind, stories told by firelight of heroes and monsters, destinies written in stars long before her birth.</span> ';
                } else {
                    // Add sensory details
                    expandedHTML += sentence.trim() + ' <span class="added-text">A cold wind whispered through the chamber, carrying the scent of pine and distant smoke, the promise of winter on its breath.</span> ';
                }
            });
            
            return expandedHTML.trim();
        }

        function condenseText(text) {
            // Simulated condensing algorithm
            const sentences = text.match(/[^\.!\?]+[\.!\?]+/g) || [text];
            let condensedHTML = '';
            
            sentences.forEach(sentence => {
                // Remove filler words and phrases
                let condensed = sentence
                    .replace(/\b(very|really|actually|basically|honestly|literally)\b\s*/gi, '<span class="deleted-text">$1 </span>')
                    .replace(/\b(in order to|due to the fact that|for the purpose of|in the event that)\b/gi, '<span class="deleted-text">$1</span> to')
                    .replace(/\b(at this point in time|at the present time)\b/gi, '<span class="deleted-text">$1</span> now')
                    .replace(/\b(it is important to note that|it should be noted that)\b/gi, '<span class="deleted-text">$1</span>');
                
                // Randomly remove some descriptive sections
                if (sentence.length > 100) {
                    const parts = sentence.split(',');
                    if (parts.length > 2) {
                        const removeIndex = Math.floor(Math.random() * (parts.length - 1)) + 1;
                        parts[removeIndex] = `<span class="deleted-text">${parts[removeIndex]}</span>`;
                        condensed = parts.join(',');
                    }
                }
                
                condensedHTML += condensed + ' ';
            });
            
            return condensedHTML.trim();
        }

        // Action button event listeners
        polishBtn.addEventListener('click', () => processText('polish'));
        expandBtn.addEventListener('click', () => processText('expand'));
        condenseBtn.addEventListener('click', () => processText('condense'));

        // Result action buttons
        copyBtn.addEventListener('click', () => {
            // Create a temporary element
            const tempElement = document.createElement('div');
            tempElement.innerHTML = enhancedText.innerHTML;
            
            // Extract text content without HTML tags
            const textToCopy = tempElement.textContent;
            
            // Copy to clipboard
            navigator.clipboard.writeText(textToCopy)
                .then(() => {
                    showToast('Text copied to clipboard!', 'success');
                })
                .catch(err => {
                    showToast('Failed to copy text.', 'error');
                    console.error('Could not copy text: ', err);
                });
        });

        downloadBtn.addEventListener('click', () => {
            // Create a temporary element
            const tempElement = document.createElement('div');
            tempElement.innerHTML = enhancedText.innerHTML;
            
            // Extract text content without HTML tags
            const textToDownload = tempElement.textContent;
            
            // Create a Blob
            const blob = new Blob([textToDownload], { type: 'text/plain' });
            
            // Create download link
            const a = document.createElement('a');
            a.download = 'enhanced-text.txt';
            a.href = window.URL.createObjectURL(blob);
            a.style.display = 'none';
            
            // Append to the document and trigger download
            document.body.appendChild(a);
            a.click();
            
            // Clean up
            document.body.removeChild(a);
            window.URL.revokeObjectURL(a.href);
            
            showToast('Download started!', 'success');
        });

        newEditBtn.addEventListener('click', () => {
            resultSection.style.display = 'none';
            novelText.focus();
            window.scrollTo({
                top: document.querySelector('.input-section').offsetTop - 100,
                behavior: 'smooth'
            });
        });

        // Purchase buttons
        purchaseButtons.forEach(button => {
            button.addEventListener('click', () => {
                if (!isLoggedIn) {
                    showToast('Please login to purchase credits', 'info');
                    showAuthModal();
                    return;
                }
                
                const plan = button.dataset.plan;
                const price = button.dataset.price;
                const credits = button.dataset.credits;
                
                let subscription = null;
                if (plan === 'monthly') subscription = 'Monthly';
                if (plan === 'annual') subscription = 'Annual';
                
                showPurchaseModal(
                    plan.charAt(0).toUpperCase() + plan.slice(1),
                    price,
                    credits,
                    subscription
                );
            });
        });

        // Confirm purchase
        confirmPurchaseBtn.addEventListener('click', () => {
            loadingOverlay.style.display = 'flex';
            document.getElementsByClassName('loading-text')[0].textContent = 'Processing payment...';
            
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
                hidePurchaseModal();
                
                const purchasedCredits = parseInt(planDescription.textContent.match(/\d+/)[0]);
                usageCredits += purchasedCredits;
                creditCount.textContent = usageCredits;
                badgeCredits.textContent = usageCredits;
                
                showToast('Purchase successful! Credits added to your account.', 'success');
            }, 2000);
        });

        // Payment method selection
        const paymentMethods = document.querySelectorAll('.payment-method');
        paymentMethods.forEach(method => {
            method.addEventListener('click', () => {
                paymentMethods.forEach(m => m.classList.remove('selected'));
                method.classList.add('selected');
            });
        });

        // Mobile menu functions
        function openMobileMenu() {
            mobileMenu.classList.add('active');
            mobileMenuBackdrop.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenu() {
            mobileMenu.classList.remove('active');
            mobileMenuBackdrop.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        mobileMenuBtn.addEventListener('click', openMobileMenu);
        mobileMenuClose.addEventListener('click', closeMobileMenu);
        mobileMenuBackdrop.addEventListener('click', closeMobileMenu);

        mobileLoginBtn.addEventListener('click', () => {
            closeMobileMenu();
            showAuthModal();
        });

        mobileSignupBtn.addEventListener('click', () => {
            closeMobileMenu();
            showAuthModal();
            registerTab.click();
        });

        // Initialize with sample text
        novelText.value = "The ancient castle stood atop the hill, its towers reaching towards the darkening sky. Inside, the princess waited, her heart growing colder with each passing day. She gazed out the window, wondering if anyone would ever come to rescue her from the curse that had befallen this forgotten kingdom.";
    </script>
</body>
</html>